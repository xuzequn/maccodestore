(function(z){
var mP=function(a,b){a.jx=b};var nP=function(){z.R.call(this)};var oP=function(a){z.Rp.call(this);this.He="例如：互联网、医学、法律、数学...";this.data=a||[]};var pP=function(a){if(a.Tf)(0,window.$)(a.Tf).on("click",".del",window.$.proxy(function(a){var c=(0,window.$)(a.target).parents(".item");c.data("active")?(z.fg(this.$m,c[0],0),z.An(c[0])):z.N(c[0]);z.x(this.data,function(a,b){a+""===c.data("url-token")+""&&this.data.splice(b,1)},this);this.Zk();this.dispatchEvent("remove")},a))};
var qP=function(a){if(a.$m)(0,window.$)(a.$m).on("click",".add",window.$.proxy(function(a){a=(0,window.$)(a.target).parents(".item");z.fg(this.Tf,a[0],0);z.An(a[0]);this.Zk();this.dispatchEvent("add")},a))};var rP=function(){z.R.call(this)};var sP=function(){z.G.call(this);this.Rg="zm-item";this.dU=!0};var tP=function(a,b){a.v().g(b,"next",a.refresh)};var uP=function(){z.R.call(this)};var vP=function(){this.bj="editing";z.R.call(this)};
var wP=function(a,b,c){z.YA.lb&&null==window.navigator.userAgent.match(/iPad/i)||(a=(0,window.$)(".item",a.K).index(b),b.siblings().eq(a-a%2).height(c?"auto":b.height()))};var xP=function(a,b,c){z.Fw.call(this,a,b,c)};var yP=function(){z.R.call(this)};var zP=function(a){var b=z.J("zh-profile-ask-list");if(b){var c=new z.Vv({use:["autoload","locationSource"],lh:!1});a.M(c);c.w(b);if(a=z.L("zm-profile-section-list"))b=new sP,b.xi("zm-profile-section-item"),tP(b,c),b.init(a)}};
var AP=function(a){var b=(0,window.$)("#zh-profile-log-list").get(0);if(b){var c=new z.Vv;c.use("locationSource",{Kt:!0});a.M(c);c.w(b);z.LC(b);(0,window.$)(b).on("click",'a[name\x3d"report"]',function(){(new z.yw("activity",(0,window.$)(this).data("id"))).submit();return!1})}};
var BP=function(a){var b=(0,window.$)("#zh-profile-fav-list \x3e .zh-general-list").get(0);if(b){var c=new z.Vv({use:["autoload","nodeSource"],lh:!1});a.M(c);c.w(b)}(0,window.$)("#zh-profile-fav-list").on("click",".zm-profile-fav-edit",function(){z.Ak({category:"collection",action:"popup_edit_collection_appear",label:"people_profile_collections_edit_collection"})})};
var CP=function(a){var b=z.J("zh-profile-topic-list");if(b){var c=new z.Vv({use:["autoload","locationSource"]});a.M(c);a.v().g(c,"itemcreated",function(a){a=a.item;var b=a.getAttribute("data-tid").split("-")[1];if(z.X.vf===z.As[3]){var c=new z.Yr(!0,"/topic/bio/update","bio");c.UB=!0;c.params=["tid\x3d"+b];c.Wb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加你在该话题的经验\x3c/a\x3e';c.w(a)}});c.w(b);if(a=z.L("zm-profile-section-list"))b=new sP,b.xi("zm-profile-section-item"),tP(b,c),b.init(a)}};
var DP=function(a){var b=(0,window.$)("#zh-profile-column-list \x3e .zh-general-list").get(0);if(b){var c=new z.Vv({use:["autoload","nodeSource"]});a.M(c);c.w(b)}};var EP=function(a){var b=(0,window.$)("#zh-profile-follows-list \x3e .zh-general-list").get(0);if(b){var c=new z.Vv({use:["autoload","nodeSource"]});a.M(c);c.w(b)}};var FP=function(a){var b=(0,window.$)("#zh-profile-follows-list-old").get(0);if(b){var c=new z.Vv({use:["autoload","locationSource"]});a.M(c);c.w(b)}};
var GP=function(a){var b=(0,window.$)("#zh-profile-answer-list \x3e .zh-general-list").get(0)||(0,window.$)("#zh-profile-answer-list").get(0);if(b){var c=new z.Vv({lh:!1});a.M(c);c.use("childConstructor",{cl:z.hC}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category","profile").fill("label","profile_answers_list")});if(a=z.L("zm-profile-section-list"))b=new sP,tP(b,c),b.init(a)}};
var HP=function(a){var b=z.J("zh-profile-page-force-to-rename");(a.zx=b)&&a.v().g(b,"click",a.hV)};var IP=function(a){var b=z.J("zh-profile-activity-wrap");b&&a.v().g(b,"click",function(a){if((a=a.target)&&"focus"===a.name){var b=a.getAttribute("data-type");(0,z.cE)(a,b,null,["zm-profile-follow-link-gray","zm-profile-unfollow-link-gray"])}})};
var JP=function(a){var b=z.J("zh-profile-activity-page-list");if(b){var c=new z.Vv({use:["expandLimit"],lh:!0});c.use("locationSource",{url:"/people/"+z.As[1]+"/activities",gt:10,param:function(a){return{start:z.Ib(a).getAttribute("data-time")}}});c.use("childConstructor",{factory:z.pC});a.M(c);c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category","profile").fill("label","profile_feed")})}};
var KP=function(){var a=z.L("zm-profile-header-operation");a&&(new z.zC).w(a);(a=z.L("zm-profile-header"))&&(new uP).w(a)};var LP=function(a){var b=z.L("zm-profile-answer-sort");b&&(a.Ch=new z.hw,a.Ch.Ha(a.XL=new z.cw("按时间排序")),a.Ch.Ha(a.YL=new z.cw("按投票排序")),a.Ch.Ha(a.WL=new z.cw("问"+z.X[0]+"的问题")),a.Ch.render(b),a.Ch.F(!1),a.v().g(b,"click",function(a){this.Ch.F(!0);a.stopPropagation();this.v().Ba(window.document,"click",function(){this.Ch.F(!1)})}),a.v().g(a.Ch,"action",a.mP))};
var MP=function(a,b){var c=new z.V(!0);a.v().Ba(c,"complete",function(){window.location.reload()});c.ajax("/people/"+z.As[1]+"/block","action\x3d"+(b?"add":"cancel"))};var NP=function(){var a=z.J("zm-profile-details-editform");a&&(new z.wC).w(a)};var OP=function(a){var b=z.L("zm-profile-fav-wrap");b&&a.v().g(b,"click",a.JN)};
var PP=function(a){a.HA=z.J("zh-profile-search-form");if(a.HA){QP(a);a.lk=a.HA.getAttribute("data_type");a.v().g(a.HA,"submit",a.search);z.F(window,"popstate",function(a){a=a.state;var b;a&&a.q&&(b=z.J("zh-profile-search-query"),b.value=(0,window.decodeURIComponent)(a.q),RP(this,a.type),this.search(void 0,!1),b.focus())},!1,a);var b=(new z.Ko(window.location)).od().get("pq"),c=(new z.Ko(window.location)).od().get("type");c||(c="all");if(b&&c){var d=z.J("zh-profile-search-info");d&&z.Q(d,!0);RP(a,
c);z.J("zh-profile-search-query").value=b;a.search(void 0,void 0,!1)}}};var QP=function(a){var b=z.J("zh-profile-search-type");b&&a.v().g(b,"click",a.pS)};var RP=function(a,b){var c=z.Of("zm-profile-search-type-item");if(c)for(var d=0;d<c.length;d++)z.T.remove(c[d],"current"),c[d].name===b&&z.T.add(c[d],"current");a.lk=b};var SP=function(){var a=z.J("zh-profile-edit-expert");a&&(new rP).w(a)};
var TP=function(a){var b=z.L("profile-expert-tip");b&&a.v().g(b,"click",function(a){var d=a.target;"enable"!==d.name&&"close"!==d.name||window.$.post("/node/ProfileExpertTopicsV2",{method:d.name},function(a){a&&a.r||("enable"===d.name?window.location.href="/people/edit/expert":z.qn(b,!0))})});(0,window.$)(".zm-profile-section-wrap.skilled-topics").each(function(){(new vP).w(this)});(0,window.$)(".zm-profile-module.skilled-topics").each(function(){(new vP).w(this)});(0,window.$)(".zm-profile-module.active-topics").each(function(){(new vP).w(this)})};
z.Lr.prototype.Pe=z.ca(19,function(a){this.ca.wu(a)});z.v(nP,z.R);nP.prototype.ka=function(a){nP.o.ka.call(this);this.K=(0,window.$)(a);this.re=(0,window.$)(".info-wrap",this.K);this.$d=(0,window.$)(".edit-wrap",this.K);(0,window.$)(".title",this.re);this.Ve=(0,window.$)("input",this.$d)};
nP.prototype.D=function(){nP.o.D.call(this);this.K.on("click","[name\x3d'edit']",z.Hm(window.$.proxy(function(){this.K.addClass("editing");var a=this.$d.find("input").get(0);a?a.focus():(a=this.$d.find("textarea").get(0))&&a.focus()},this),[!0,{Ed:!1}]));var a=this;this.zq=[];(0,window.$)("input[type\x3dtext]",this.K).each(function(){var b=new z.vC("/topic/autocomplete",this,(0,window.$)(this).parents(".topic-input-wrap")[0]);a.zq.push(b)});this.$d.on("keydown","input",function(a){13===a.keyCode&&
(0,window.setTimeout)(function(){var b=(0,window.$)(a.target),f=b.parents(".edit-wrap").children().index(b.parent()),g=b.parents(".edit-wrap").find("input, select").get(f+1),f=b.parents(".edit-wrap").find("input, select").get(f-1);b.val()&&(g?g.focus():f&&!(0,window.$)(f).val()&&f.focus())})});this.$d.on("click","[name\x3d'cancel'], [name\x3d'save']",window.$.proxy(function(a){a=a.target.name;"cancel"===a?this.cancel():"save"===a&&this.save()},this));var b=(0,window.$)(".fold-wrap");b.click(function(a){"fold"===
a.target.name?b.addClass("fold"):"unfold"===a.target.name&&b.removeClass("fold")})};
nP.prototype.save=function(){var a=this,b=this.K.data("name");if("location"===b){var b=this.$d.find("input.location"),c=this.$d.find("select"),d=this.$d.find("input.male").is(":checked")?1:0;window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{location:[b.val()],business:c.val(),gender:d}}},function(b){b&&b.r?z.U.message(b.msg):(b=b.msg,b.location[0].html||(b.location[0].html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写居住地\x3c/a\x3e"),b.business.html||
(b.business.html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写行业\x3c/a\x3e"),a.re.find("span.location").attr("title",b.location[0].text).html(b.location[0].html),a.re.find("span.business").attr("title",b.business.text).html(b.business.html),b=1===(0,window.parseInt)(b.gender,10)?"male":"female",a.re.find("span.gender i").removeClass("icon-profile-female icon-profile-male").addClass("icon-profile-"+b),a.cancel())})}else"employment"===b?(c=this.$d.find("input.employment"),
b=this.$d.find("input.position"),c=c.val(),b=b.val(),window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{employment:[[c,b]]}}},function(b){b&&b.r?z.U.message(b.msg):(b=b.msg,b.employment[0][0].text||b.employment[0][1].text?a.K.removeClass("empty"):a.K.addClass("empty"),b.employment[0][0].html||(b.employment[0][0].html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写公司信息\x3c/a\x3e"),b.employment[0][1].html||(b.employment[0][1].html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写职位\x3c/a\x3e"),
a.re.find(".employment").attr("title",b.employment[0][0].text).html(b.employment[0][0].html),a.re.find(".position").attr("title",b.employment[0][1].text).html(b.employment[0][1].html),a.cancel())})):"education"===b?(c=[this.$d.find("input.education"),this.$d.find("input.education-extra")],b=c[0].val(),c=c[1].val(),window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{education:[[b,c]]}}},function(b){b&&b.r?z.U.message(b.msg):(b=b.msg,b.education[0][0].text||b.education[0][1].text?a.K.removeClass("empty"):
a.K.addClass("empty"),b.education[0][0].html||(b.education[0][0].html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写学校信息\x3c/a\x3e"),b.education[0][1].html||(b.education[0][1].html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写专业\x3c/a\x3e"),a.re.find(".education").attr("title",b.education[0][0].text).html(b.education[0][0].html),a.re.find(".education-extra").attr("title",b.education[0][1].text).html(b.education[0][1].html),
a.cancel())})):"description"===b&&(b=this.$d.find("textarea.description"),window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{description:b.val()}}},function(b){b&&b.r?z.U.message(b.msg):(b=b.msg,b.description.text?a.K.removeClass("empty"):(b.description.fold_html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写个人简介\x3c/a\x3e",b.description.unfold_html="\x3ca href\x3d'javascript:;' class\x3d'zg-link-litblue-normal' name\x3d'edit'\x3e填写个人简介\x3c/a\x3e",
a.K.addClass("empty")),a.re.find(".fold-item .content").empty().html(b.description.fold_html),a.re.find(".unfold-item .content").html(b.description.unfold_html),b.description.shortened?a.re.removeClass("disable-fold"):a.re.addClass("disable-fold"),a.cancel())}))};nP.prototype.cancel=function(){this.K.removeClass("editing")};z.v(oP,z.Rp);z.e=oP.prototype;
z.e.w=function(a){this.h=a;this.kg=z.L("zm-tag-editor-labels",this.h);this.Le(!0);this.ze();this.ec();this.Tf=z.J("zh-expert-topics");this.$m=z.J("zh-active-topics");pP(this);qP(this);this.data=(0,window.$)("#zh-expert-topics .item").map(function(){return(0,window.$)(this).data("url-token")}).get();this.sm()};
z.e.On=function(){this.Wc||(this.Wc=z.M("div","zm-tag-editor-editor",[this.df=z.M("div","zg-section zm-tag-editor-command-buttons-wrap",[this.nb=z.J("profile-expert-edit-input")])]),this.He&&(this.bz=new z.Bp(this.He),this.bz.w(this.nb),this.nb.title=this.He),z.eg(this.Wc,this.kg),this.Mg(this.df))};
z.e.Mg=function(a){this.aa=new z.Qp("/topic/autocomplete",this.nb,null,null,a,!0);this.aa.kh(!0);this.aa.Yl=this.Me;this.aa.Fp(this.tm());mP(this.aa,[this.He]);this.v().g(this.aa,"select",this.To);this.v().g(this.aa,"suggestionsupdate",this.Jv);this.v().g(this.aa,"suggestionsupdate",this.Gv);this.v().g(this.aa,z.so,function(){(0,window.$)(this.aa.N.h).hide()})};
z.e.Gv=function(){if(0===this.aa.Sa.length){var a=z.M("div",{className:"zu-autocomplete-empty"},"没有名字为 "+(0,window.$)(this.nb).val()+" 的话题");(0,window.$)(this.aa.N.h).html(a).show()}};z.e.To=function(){var a=this.aa.pj().slice(1);a&&3<a.length&&(this.oE=a,this.Xe(a))};
z.e.Xe=function(a){this.data.push(a[1]);var b=(0,window.$)(this.Tf).find("[data-url-token\x3d'"+a[1]+"']")[0];b?z.An(b):(z.Kp("TopicMediumV2",{member_url_token:z.X[1],topic_url_token:a[1]},this.qr,this),(0,window.$)(this.$m).find("[data-url-token\x3d'"+a[1]+"']").remove(),this.dispatchEvent("add"))};z.e.qr=function(a){a=(0,window.$)(a)[0];z.fg(this.Tf,a,0);z.An(a);this.Zk()};z.e.Qe=function(){};
z.e.sm=function(){if(!z.YA.lb){var a=this;this.Qf&&this.Qf.H();var b=new z.pp;b.Ir=(0,z.rb)("expert-item-moving").split(" ");z.qp(b,this.Tf,4);b.init();this.Qf=b;this.v().g(this.Qf,"dragend",function(){this.dispatchEvent("sort")});(0,window.$)("a, input, .del, .add",this.Tf).each(function(){a.v().g(this,"mousedown",function(a){a.stopPropagation()})});this.v().g(this.Qf,"beforedragstart",function(){return z.L("editing",this.Tf)?!1:!0})}};
z.e.Zk=function(){var a=(0,window.$)(this.Tf).children().length;6<a&&z.N((0,window.$)(this.Tf).children()[6]);z.Q(z.J("zh-profile-expert-empty"),0>=a);0<a&&z.Q(z.J("zh-profile-expert-warning"),!1);a=(0,window.$)(this.$m).children().length;z.Q(z.J("active-topics-wrap"),a);this.sm()};z.e.tm=function(){return(0,z.r)(function(a){return z.Kb(a,function(a){return z.Ob(this.data,function(c){return c+""!==a[2]+""&&3<a.length})},this)},this)};z.v(rP,z.R);
rP.prototype.ka=function(a){this.h=a;this.Ka=new oP;this.Ka.w(this.h);this.form=z.J("zm-profile-expert-editform");this.v().g(this.form,"submit",this.Sz);this.v().g(this.Ka,["add","remove","sort"],function(){this.ef()});(0,window.$)(".enable").on("change","input",window.$.proxy(function(){this.ef()},this));var b=z.J("zh-profile-expert-warning");b&&this.v().g(b,"click",function(a){"close"===a.target.name&&z.qn(b)});(0,window.$)(".enable input[type\x3d'radio']").click(function(a){a=!Number((0,window.$)(a.target).val());
z.Q(z.J("zh-profile-expert-reopen-tip"),a)})};rP.prototype.ef=function(){(0,window.$)(window).on("beforeunload.profile",(0,z.r)(function(){return"你的更改还未保存，确认离开该页面吗？"},this))};rP.prototype.Pf=function(){(0,window.$)(window).off("beforeunload.profile")};
rP.prototype.Sz=function(a){a.preventDefault();z.Lb(this.Ka.data,function(a){return a[3]});a=(0,window.$)(this.form).serializeArray()[0].value;var b=(0,window.$)("#zh-expert-topics .item").map(function(){return(0,window.$)(this).data("url-token")}).get(),c=this;window.$.post("/node/ProfileEditExpertTopicsV2",{method:"save",params:{settings:{enable_expert:a,expert_topic:b}}},function(a){a&&a.r||(c.Pf(),window.location.href="/people/"+z.X[1])})};z.v(sP,z.Dl);z.e=sP.prototype;
z.e.init=function(a){this.wb=a;this.v().g(a,"click",this.Pa);this.refresh()};z.e.xi=function(a){this.Rg=a};
z.e.Pa=function(a){if(a.target){var b=z.Hn(this.wb,a.target);b&&(this.type=b.getAttribute("data-type"),this.id=b.getAttribute("data-id"),this.action=b.name,this.item=z.Mg(a.target,this.Rg),this.type&&this.id&&this.action&&this.item&&!this.BK&&(this.BK=!0,this.xhr=new z.V(!0),this.v().g(this.xhr,"complete",this.Yg),this.xhr.ajax("/people/"+("top"===this.action?"pin":"unpin")+"_"+this.type,this.type+"_id\x3d"+this.id,"POST")))}};
z.e.Yg=function(){if("cancel-top"===this.action)z.qn(this.item,!0);else if("top"===this.action){var a=z.Of(this.Rg,this.wb);z.yi(this.item);a&&2<=a.length&&z.dg(z.N(this.item),z.L(this.Rg,this.wb));this.scroll();z.An(this.item);a=z.L("zm-item-top-btn-top",this.item);z.Q(a,!1);a=z.L("zm-item-top-btn-cancel",this.item);z.Q(a,!0);this.refresh()}this.BK=!1};z.e.scroll=function(){if(this.dU){var a=z.L("zm-profile-section-wrap"),b=z.Pg(z.I((z.t||window).document)).y;a&&0>z.yi(a).y-b&&a.scrollIntoView()}};
z.e.refresh=function(){var a=z.Of(this.Rg,this.wb);a&&0<a.length&&z.x(a,function(a,c){if(0!==c){var d=z.L("zm-item-top-btn-top",a);d&&z.Q(d,!0)}},this)};z.v(uP,z.R);
uP.prototype.ka=function(a){uP.o.ka.call(this);if(a){this.K=(0,window.$)(a);var b=(0,window.$)(".avatar",this.K);(0,window.$)(".editable-group",this.K).each(function(){(new nP).w(this)});(a=z.J("profile-header-description-input"))&&new z.Vn(a);if((a=z.L("zm-profile-header-avatar-container"))&&z.T.has(a,"self")){var c=new z.Ez(z.Fz);c.w(a);this.v().g(c,"beforepost",function(){b.parent().append((0,window.$)('\x3cdiv class\x3d"avatar-edit-preview-loading"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e'))});
this.v().g(c,"success",function(){window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{avatar_path:c.getData().url}}},function(a){if(a&&a.r){(0,window.$)(".avatar-edit-preview-loading").remove();for(var f="更新失败",g=0;g<a.msg.length;++g){var h=a.msg[g];if(2<=h.length&&"avatar_path"===h[0]){f=h[1];break}}z.U.message(f)}else(0,window.$)(".avatar-edit-preview-loading").remove(),b.attr({src:c.Md("l"),srcset:c.Md("xl")+" 2x"})})})}}};z.v(vP,z.R);
vP.prototype.ka=function(a){vP.o.ka.call(this,a);this.K=(0,window.$)(a);this.K.on("click",'a[href^\x3d"javascript"]',window.$.proxy(this.Pa,this));this.K.on("click",'a[href^\x3d"javascript"], input',!1);this.K.on("click",".item",window.$.proxy(this.NS,this))};vP.prototype.NS=function(a){var b=(0,window.$)(a.currentTarget),c=b.data("href"),b=c&&!b.hasClass(this.bj);a=a.metaKey||a.ctrlKey;b&&(a?window.open(c):window.location.href=c)};
vP.prototype.Pa=function(a){var b=(0,window.$)(a.currentTarget),c=b.closest(".item");a=b.attr("name");if("edit"===a)b.closest(".description").hide().siblings(".description-edit").show().find("input").focus().closest(".item").addClass(this.bj).closest(".skilled-topics").addClass(this.bj),wP(this,c);else if("cancel"===a)b.closest(".description-edit").hide().siblings(".description").show().closest(".item").removeClass(this.bj).closest(".skilled-topics").removeClass(this.bj),wP(this,c,!0);else if("save"===
a){var d=new z.V(!0);this.v().g(d,"success",function(){var a=z.sf(d);a.r?z.U.message(a.msg):(b.closest(".description-edit").hide().siblings(".description").show().children(".des").text(a.msg).siblings(".edit").addClass("zu-edit-button").children(".edit-msg").html("修改").closest(".item").removeClass(this.bj).closest(".skilled-topics").removeClass(this.bj),wP(this,c,!0))});d.ajax("/topic/bio/update","tid\x3d"+b.closest(".item").data("id")+"\x26bio\x3d"+b.parent().siblings("input").val(),"POST")}};
z.v(xP,z.Fw);xP.prototype.Zo=function(a){var b=z.pC(a);this.M(b);b.w(a);b instanceof z.hC&&b.collapse()};z.v(yP,z.R);z.e=yP.prototype;z.e.init=function(){z.VF.M(this);this.w(window.document.body)};
z.e.D=function(){yP.o.D.call(this);KP();IP(this);HP(this);PP(this);JP(this);OP(this);NP();LP(this);SP();TP(this);zP(this);GP(this);AP(this);CP(this);DP(this);EP(this);FP(this);BP(this);this.wo();-1<window.location.search.indexOf("clean-followers-noti\x3d1")&&(new z.V(!0)).ajax("/notification/clear","no_refresh_content\x3dtrue\x26type\x3dfollow");(0,window.$)("#__signin").click(function(){(new z.Dv).F(!0)});(0,window.$)(".zm-profile-header-user-edit").click(z.Hm(z.p,[!0,{Ed:!1}]))};
z.e.hV=function(){z.U.confirm("确定","确定要强制此用户改名吗？",function(a){if(a&&(z.J("realname_form").submit(),this.zx.innerHTML="已发送",z.T.add(this.zx,"zg-gray"),a=this.zx))if(z.Cd(a))a.fe&&a.fe.removeAll(void 0);else if(a=z.Nd(a)){var b=0,c;for(c in a.kc)for(var d=a.kc[c].concat(),f=0;f<d.length;++f)z.Wd(d[f])&&++b}},this)};
z.e.wo=function(){this.Cj();var a=z.J("zm-profile-header-pm-btn");a&&z.F(a,"click",z.Fb(function(a){a.preventDefault()},z.Hm(function(){var b=new z.bv;b.show();z.dv(b,z.As[3],z.As[0]);z.cv(b,a.href);b.wc.focus()},!0)));var b=z.J("zh-profile-cancel-block");b&&this.v().g(b,"click",this.MH);(0,window.$)("#zh-report-people, #profile-side-op a[name\x3dreport]").each(function(a,b){z.Bw(new z.yw("member",z.As[3]),b)});(b=z.J("zh-profile-search-query-mirro"))&&new z.Yl(b,b.getAttribute("placeholder"))};
z.e.MH=function(){z.U.confirm("确定取消屏蔽？","取消屏蔽后，对方将可以关注你、向你发私信、评论你的回答、使用「@」提及你，邀请你回答问题。",function(a){a&&MP(this,!1)},this)};z.e.Sk=function(){this.v().Ba(window.document,"click",function(){this.fb.F(!1)})};z.e.Cj=function(){var a=z.J("profile-side-op");a&&this.v().g(a,"click",this.uj)};z.e.mP=function(a){var b="";a.target===this.XL?b="time":a.target===this.YL?b="vote":a.target===this.WL&&(b="ask");window.location.href="/people/"+z.X[1]+"/answers?sort\x3d"+b};
z.e.uj=function(a){a=a.target.name;"block"===a?z.U.confirm("确定要屏蔽该用户？","屏蔽用户后，对方将不能关注你、向你发私信、评论你的实名回答、使用「@」提及你，邀请你回答问题，但仍然可以查看你的公开信息。",function(a){a&&MP(this,!0)},this):"cancel-block"===a&&this.MH()};z.e.JN=function(a){if(a&&a.target&&(a=z.Hn(this.h,a.target))){var b=z.L("zm-profile-fav-item-title",a),c=z.L("zm-profile-fav-item-des",a);b&&c&&"fav-edit"===a.name&&(b=b.innerHTML,c=c.innerHTML||"",a=[Number(a.getAttribute("data-id")),Number(a.getAttribute("data-public"))],z.sA(z.oA.Y(),b,c,a))}};
z.e.pS=function(a){(a=a.target)&&a.name&&(RP(this,a.name),this.search())};
z.e.search=function(a,b,c){this.Pe=z.J("zh-profile-search-query").value;this.vm="/people/"+z.J("zh-profile-search-form").getAttribute("data_url")+"/search";if(this.Pe){void 0===b&&(b=!0);void 0===c&&(c=!0);if(window.history.pushState){if(this.JA)return;a&&a.preventDefault();this.wm=new z.V(!0);this.JA=!0;this.v().g(this.wm,"complete",this.AK);b&&window.history.pushState({q:(0,window.encodeURIComponent)(this.Pe),type:this.lk},"","?pq\x3d"+(0,window.encodeURIComponent)(this.Pe)+"\x26type\x3d"+this.lk);
this.wm.ajax(this.vm,"type\x3d"+this.lk+"\x26pq\x3d"+(0,window.encodeURIComponent)(this.Pe),"","POST")}else a||(c?(this.Pe=z.J("zh-profile-search-query").value,this.vm="/people/"+z.J("zh-profile-search-form").getAttribute("data_url")+"/search",window.location.href=this.vm+"?type\x3d"+this.lk+"\x26pq\x3d"+(0,window.encodeURIComponent)(this.Pe)):(this.wm=new z.V(!0),this.JA=!0,this.v().g(this.wm,"success",this.AK),this.Pe=z.J("zh-profile-search-query").value,this.vm="/people/"+z.J("zh-profile-search-form").getAttribute("data_url")+
"/search",this.wm.ajax(this.vm,"type\x3d"+this.lk+"\x26pq\x3d"+(0,window.encodeURIComponent)(this.Pe),"","POST")));(a=z.J("zh-profile-search-info"))&&z.Q(a,!0)}else a&&a.preventDefault()};
z.e.AK=function(){this.JA=!1;z.wg(z.J("zh-profile-search-word"),this.Pe);var a=z.sf(this.wm);if(a&&!a.r){var b=z.J("zh-profile-search-list");if(b)if(0===a.msg[0])z.J("zh-profile-list-container").innerHTML='\x3cdiv id\x3d"'+b.id+'"\x3e\x3cdiv style\x3d"margin: 20px;color: #999;text-align: center;"\x3e抱歉，没有找到任何结果\x3c/div\x3e\x3c/div\x3e';else{var c;c=""+('\x3cdiv id\x3d"'+b.id+'"\x3e');c+=a.msg[1]+"\x3c/div\x3e";z.J("zh-profile-list-container").innerHTML=c+'\x3ca href\x3d"javascript:;" id\x3d"zh-load-more" class\x3d"zg-btn-white zu-button-more" style\x3d""\x3e更多\x3c/a\x3e';
(a=z.Of("zm-item",b))&&a.length&&(this.Ai=a[a.length-1].id.split("-")[1]);this.Xg=null;this.Xg=new xP(z.J(b.id),null,!0);this.Xg.init();this.Xg.Ai=this.Ai;this.Xg.url=this.vm;this.Xg.Kk("pq",this.Pe);this.Xg.Kk("type",this.lk);z.J("zh-profile-search-query").focus()}}};z.Ia("ZH.entryProfile",function(){(new yP).init()});z.Fh("page-profile");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-profile.0528035c.js