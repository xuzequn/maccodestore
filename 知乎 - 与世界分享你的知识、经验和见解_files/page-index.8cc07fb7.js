(function(z){
var hL=function(a){z.Ul.call(this,"register");this.fu=a};var iL=function(){z.R.call(this)};var jL=function(){kL();lL();(0,window.$)(".qrcode-app-download .app-link").on({mouseenter:function(){z.Ak({category:"app",action:"hover_download_app",label:"home_download_app"})},click:function(){z.Ak({nc:!0,category:"app",action:"visit_app",label:"home_download_app"})}})};
var kL=function(){var a=(0,window.$)(".sign-flow");if(a.length){var b=new mL;b.w(a[0]);b.g("trackRequested",function(a){a.preventDefault();a.label="home_default";if(-1!==a.action.indexOf("sign_up_success")){var b=(0,window.$)("#json-sns-register-experiment").data("is-hidden");a.attributes=Object.assign({},a.attributes,{is_sns_hidden:b})}z.Ak(a)})}};
var lL=function(){function a(){var a=window.particlesJS;a&&((0,window.$)("\x3cdiv\x3e",{id:"particles"}).appendTo("body"),a("particles",c))}var b=!!window.HTMLCanvasElement,c={particles:{number:{value:20,density:{enable:!0,value_area:1E3}},color:{value:"#e1e1e1"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:15,random:!0,anim:{enable:!1,
speed:180,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:650,color:"#cfcfcf",opacity:.26,width:1},move:{enable:!0,speed:2,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},
push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0};(0,window.$)(function(){b&&window.$.ajax({url:"/static/revved/components/particles.js/particles.min.00debcf6.js",dataType:"script",cache:!0}).then(a)})};var mL=function(){z.R.call(this)};var nL=function(a){return!/^\+?[0-9]+$/.test(a)};var oL=function(a,b){a.account&&(a[b]=a.account,delete a.account)};
var pL=function(a){function b(a,b){(0,window.$)(":submit",a).click(function(){b(a)});(0,window.$)("keydown",a).click(function(c){13===c.keyCode&&b(a)})}qL(a);rL(a);a.so();sL();a.ij();tL(a);var c=a.m();(0,window.$)(".view-signin .js-signup",c).click(function(){uL(a)});(0,window.$)(".view-signup .js-signin",c).click(function(){vL(a)});b((0,window.$)(".view-signin form",c),function(b){b=b.Qd().account;var c=nL(b);a.Z({category:"sign_in",action:b?"click_sign_in_submit_"+(c?"email":"phone"):"click_sign_in_submit_no_channel"})});
b((0,window.$)(".view-signup form",c),function(b){b=b.Qd();b=b.phone_num||b.account;var c=a.qh?nL(b):!1;a.Z({category:"sign_up",action:b?a.qh?"click_sign_up_submit_"+(c?"email":"phone"):"click_sign_up_submit_phone":"click_sign_up_submit_no_channel"})});(0,window.$)(".js-bindweibo",c).click(function(){a.Z({category:"sign_in_or_sign_up",action:"click_sign_with_weibo_start"});z.Jl("sina",a)});(0,window.$)(".js-bindqq",c).click(function(){a.Z({category:"sign_in_or_sign_up",action:"click_sign_with_qq_start"});
z.Jl("qq",a)});(0,window.$)(".js-bindwechat",c).click(function(){a.Z({category:"sign_in_or_sign_up",action:"click_sign_with_wechat_start"});z.Jl("wechat",a)});(0,window.$)(".js-toggle-sns-buttons").click(function(){var a=(0,window.$)(".sns-buttons",c);a.hasClass("is-visible")?a.onTransitionEnd(function(){a.css("visibility","hidden")},250).removeClass("is-visible"):a.css("visibility","visible").addClass("is-visible")})};
var tL=function(a){var b=(0,window.$)(".index-tab-navs a",a.m()),c=(0,z.r)(function(){var a=window.location.hash||"#"+("signin"===window.location.pathname.slice(1)?"signin":"signup"),c=b.filter(function(){return(0,window.$)(this).attr("href")===a});c.addClass("active").siblings().removeClass("active");c.parent().attr("data-active-index",c.index());"#signin"===a?vL(this):"#signup"===a&&uL(this)},a);a.v().g(window,"hashchange",c);c()};
var qL=function(a){a.Vm=(0,window.$)(".view-signin",a.m());var b=(0,window.$)("form",a.Vm),c=(0,window.$)("button.submit",b);b.validate(window.$.extend({},z.aF,{submitHandler:z.vl(c,window.$.proxy(a.Hz,a))}));c=(0,window.$)(".captcha-module",b).get(0);a.pt=new z.Ol;a.pt.w(c);var d=(0,window.$)('input[name\x3d"account"]',b);(0,window.$)(".unable-login",a.Vm).click(function(){var b=new z.mm(d.val());b.show();a.v().g(b,z.Yl,function(){z.Pl(a.pt)})})};
var rL=function(a){a.Oc=(0,window.$)(".view-signup",a.m());var b=(0,window.$)("form",a.Oc);a.qh=!(0,window.$)('input[name\x3d"phone_num"]',b).length;var c=(0,window.$)("button.submit",b);b.validate(window.$.extend({},z.aF,{submitHandler:z.vl(c,window.$.proxy(a.dk,a))}));var d=(0,window.$)('input[name\x3d"account"]',b);a.Oc.on("click",".switch-to-login",function(){vL(a);var b=d.val();b&&(0,window.$)('input[name\x3d"account"]',a.OV).val(b)});c=(0,window.$)(".captcha-module",b).get(0);a.ip=new z.Ol;
a.ip.w(c);z.Pl(a.ip);a.Om=new z.Il(b);a.Om.start()};var vL=function(a){a.Vm.is(":visible")||(a.Oc.hide(),a.Vm.show(),a.ij(),z.Pl(a.pt))};var uL=function(a){a.Oc.is(":visible")||(a.Vm.hide(),a.Oc.show(),a.ij(),z.Pl(a.ip))};var sL=function(){var a=z.ul.get("accountcallback");z.ul.remove("accountcallback");if(a){a=(0,window.decodeURIComponent)(a);try{var b=JSON.parse(a);z.W.dispatchEvent(new z.Gl("accountcallback",b))}catch(c){}}};z.v(hL,z.im);hL.prototype.B=function(){hL.o.B.call(this);this.ia(wL)};
hL.prototype.D=function(){hL.o.D.call(this);this.Eb()};hL.prototype.Eb=function(){var a=(0,window.$)("form",this.va);this.Fe(a,this.dk);(0,window.$)('input[name\x3d"phone_num"]',a).val(this.fu.phone_num);var b=(0,window.$)(".send-code",a),c=(0,window.$)('input[name\x3d"phone_num"]',a);z.lm(this,b,function(){var b=c.val(),f=this;window.$.get("/send_register_verification_code/sms",window.$.param({phone_num:b}),function(b){b.r&&(b=b.data,f.hb(b,"account","phone_num"),a.data("validator").showErrors(b))})})};
hL.prototype.dk=function(a){var b=this,c=(0,window.$)(a);a=window.$.extend({},this.fu,c.Qd());return window.$.post("/register/phone_num",a,function(a){a.r?(a=a.data,b.hb(a,"account","phone_num"),c.data("validator").showErrors(a)):(b.Z({nc:!0,category:"sign_up",action:"sign_up_success_phone"}),b.Zc())})};var wL='\x3cdiv class\x3d"title verification"\x3e\x3ch1\x3e验证手机\x3c/h1\x3e\x3ch2\x3e请输入你收到的 6 位数短信验证码\x3c/h2\x3e\x3c/div\x3e\x3cdiv class\x3d"view verification"\x3e\x3cform\x3e\x3cdiv class\x3d"input-wrapper"\x3e\x3cinput type\x3d"text" name\x3d"phone_num" placeholder\x3d"手机号" required\x3e\x3c/div\x3e\x3cdiv class\x3d"input-wrapper verification-code"\x3e\x3cinput type\x3d"text" name\x3d"verification_code" placeholder\x3d"6 位数验证码" maxlength\x3d"6" required\x3e\x3cbutton type\x3d"button" class\x3d"send-code"\x3e重发验证码\x3c/button\x3e\x3c/div\x3e\x3cbutton class\x3d"submit blue-button"\x3e进入知乎\x3c/button\x3e\x3c/form\x3e\x3c/div\x3e';z.v(iL,z.R);iL.prototype.init=function(){this.w(window.document.body)};iL.prototype.D=function(a){iL.o.D.call(this,a);jL()};z.v(mL,z.R);z.e=mL.prototype;z.e.D=function(){mL.o.D.call(this);pL(this)};z.e.Z=function(a){this.dispatchEvent(window.$.extend({type:"trackRequested"},a))};
z.e.Hz=function(a){var b=this,c=(0,window.$)(a);a=c.Qd();var d=nL(a.account);b.Z({category:"sign_in",action:"sign_in_front_end_pass_"+(d?"email":"phone")});var f=d?"/login/email":"/login/phone_num";d?oL(a,"email"):oL(a,"phone_num");return window.$.post(f,a,function(a){a.r?(c.data("validator").showErrors(a.data),z.Pl(b.pt)):(b.Z({nc:!0,category:"sign_in",action:"sign_in_success_"+(d?"email":"phone")}),b.Zc())})};
z.e.dk=function(a){var b=this;a=(0,window.$)(a);var c=a.Qd(),d=b.qh?nL(c.account):!1;b.Z({nc:!0,category:"sign_up",action:"sign_up_front_end_pass_"+(d?"email":"phone")});var f=d?"/register/email":"/register/phone_num/validation";d?oL(c,"email"):oL(c,"phone_num");var g=this.Om.stop();c.userInfo=JSON.stringify(g);var h=a.data("validator");return d?window.$.post(f,c,function(a){a&&a.r?(z.Pl(b.ip),h.showErrors(a.data)):(b.Z({nc:!0,category:"sign_up",action:"sign_up_success_email"}),b.Zc())}):window.$.post(f,
c,function(a){a.r?(z.Pl(b.ip),b.qh||oL(a.data,"phone_num"),h.showErrors(a.data)):(a=new hL(c),a.mb(b),a.G(!0),window.$.get("/send_register_verification_code/sms",{phone_num:c.phone_num}))})};z.e.ij=function(){if(!z.dm){var a=this.m();(0,window.setTimeout)(function(){(0,window.$)("input[placeholder]:visible",a).placeholder()},10)}};z.e.so=function(){z.Nl(this.v(),this.jR)};
z.e.jR=function(a){a=a.yf;var b={qqconn:"qq",wechat:"wechat",sina:"weibo"}[a.type];1===a.login?(this.Z({nc:!0,category:"sign_in",action:"sign_in_success_"+b}),this.Zc()):(a=new z.qm(a),a.mb(this),a.show())};z.e.Zc=function(){var a=(new z.No(window.location.href)).md().get("next");a?window.location.href=a:window.location.reload()};z.Ha("ZH.entrySignPage",function(){(new iL).init()});z.Fh("page-index");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-index.8cc07fb7.js